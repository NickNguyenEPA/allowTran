allowTrans <- read.csv("./data/allowanceTransaction.csv")
allowTrans <- allowTrans %>% mutate_all(~replace(., is.na(.), "NULL"))
library(data.table)
library(httr)
library(htmltools)
library(jsonlite)
library(tidyverse)
library(lubridate)
library(zoo)
source("C:/Users/nnguye01/Desktop/electron-quick-start/yknow.R", echo=TRUE)
#
# res <- GET(paste0(allowanceUrl, "&transactionBeginDate=2021-01-01&transactionEndDate=2021-03-01"))
# allowTrans <- fromJSON(rawToChar(res$content))
allowTrans <- read.csv("./data/allowanceTransaction.csv")
allowTrans <- allowTrans %>% mutate_all(~replace(., is.na(.), "NULL"))
allowTrans <- allowTrans %>% mutate(across(everything(), ~gsub("[[:punct:]]", " ", .x)))
allowTrans$transactionDate <- as.Date(allowTrans$transactionDate, format = "%Y %m %d")
allowTrans$totalBlock <- as.numeric(allowTrans$totalBlock)
save(allowTrans,file="./data/allowanceTransaction/allowTrans.RData")
#
# res <- GET(paste0(allowanceUrl, "&transactionBeginDate=2021-01-01&transactionEndDate=ldld"))
# allowTrans <- fromJSON(rawToChar(res$content))
# allowTrans <- read.csv("./data/allowanceTransaction.csv")
# allowTrans <- allowTrans %>% mutate_all(~replace(., is.na(.), "NULL"))
# allowTrans <- allowTrans %>% mutate(across(everything(), ~gsub("[[:punct:]]", " ", .x)))
# allowTrans$transactionDate <- as.Date(allowTrans$transactionDate, format = "%Y %m %d")
# allowTrans$totalBlock <- as.numeric(allowTrans$totalBlock)
save(allowTrans,file="./data/allowanceTransaction/allowTrans.RData")
#
res <- GET(paste0(allowanceUrl, "&transactionBeginDate=2021-01-01&transactionEndDate=ldld"))
library(data.table)
library(httr)
library(htmltools)
library(jsonlite)
library(tidyverse)
library(lubridate)
library(zoo)
allowTrans <- fromJSON(rawToChar(res$content))
#
# res <- GET(paste0(allowanceUrl, "&transactionBeginDate=2021-01-01&transactionEndDate=2021-03-01"))
# allowTrans <- fromJSON(rawToChar(res$content))
allowTrans <- read.csv("./data/allowanceTransaction.csv")
allowTrans <- allowTrans %>% mutate_all(~replace(., is.na(.), "NULL"))
allowTrans <- allowTrans %>% mutate(across(everything(), ~gsub("[[:punct:]]", " ", .x)))
allowTrans$transactionDate <- as.Date(allowTrans$transactionDate, format = "%Y %m %d")
allowTrans$totalBlock <- as.numeric(allowTrans$totalBlock)
save(allowTrans,file="./data/allowanceTransaction/allowTrans.RData")
View(allowTrans)
current_date <- Sys.Date()
#prepare for API call
apiKEY <- read_lines("./data/apiKey/api_key.txt")
apiUrlBase <- "https://api.epa.gov/easey"
allowanceUrl <- paste0(apiUrlBase,"/streaming-services/allowance-transactions?API_KEY=",apiKEY)
"2023-09-14" > max_date
re <- GET(paste0(allowanceUrl, "&transactionBeginDate=", "2024-06-02", "&transactionEndDate=", current_date))
updateData <- fromJSON(rawToChar(re$content))
#
res <- GET(paste0(allowanceUrl, "&transactionBeginDate=2021-01-01&transactionEndDate=2021-03-01"))
View(res)
allowTrans <- fromJSON(rawToChar(res$content))
glimpse(allowTrans)
allowTrans <- read.csv("./data/allowanceTransaction.csv")
allowTrans <- allowTrans %>% mutate_all(~replace(., is.na(.), "NULL"))
allowTrans <- allowTrans %>% mutate(across(everything(), ~gsub("[[:punct:]]", " ", .x)))
allowTrans$transactionDate <- as.Date(allowTrans$transactionDate, format = "%Y %m %d")
allowTrans$totalBlock <- as.numeric(allowTrans$totalBlock)
save(allowTrans,file="./data/allowanceTransaction/allowTrans.RData")
View(allowTrans)
allowTrans <- read.csv("./data/allowanceTransaction.csv")
allowTrans <- allowTrans %>% mutate_all(~replace(., is.na(.), "NULL"))
allowTrans <- allowTrans %>% mutate(across(everything(), ~gsub("[[:punct:]]", " ", .x)))
allowTrans$transactionDate <- as.Date(allowTrans$transactionDate, format = "%Y %m %d")
allowTrans$totalBlock <- as.numeric(allowTrans$totalBlock)
save(allowTrans,file="./data/allowanceTransaction/allowTrans.RData")
allowTrans <- read.csv("./data/allowanceTransaction.csv")
allowTrans <- allowTrans %>% mutate_all(~replace(., is.na(.), "NULL"))
allowTrans <- allowTrans %>% mutate(across(everything(), ~gsub("[[:punct:]]", " ", .x)))
allowTrans$transactionDate <- as.Date(allowTrans$transactionDate, format = "%Y %m %d")
allowTrans$totalBlock <- as.numeric(allowTrans$totalBlock)
save(allowTrans,file="./data/allowanceTransaction/allowTrans.RData")
save(allowTrans,file="./data/allowanceTransaction/allowTrans.RData")
library(data.table)
library(httr)
library(htmltools)
library(jsonlite)
library(tidyverse)
library(lubridate)
library(zoo)
library(data.table)
allowTrans <- read.csv("./data/allowanceTransaction.csv")
allowTrans <- allowTrans %>% mutate_all(~replace(., is.na(.), "NULL"))
allowTrans <- allowTrans %>% mutate(across(everything(), ~gsub("[[:punct:]]", " ", .x)))
allowTrans$transactionDate <- as.Date(allowTrans$transactionDate, format = "%Y %m %d")
allowTrans$totalBlock <- as.numeric(allowTrans$totalBlock)
save(allowTrans,file="./data/allowanceTransaction/allowTrans.RData")
