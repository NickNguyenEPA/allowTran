<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Matt Dancho" />

<meta name="date" content="2023-03-31" />

<title>R Quantitative Analysis Package Integrations in tidyquant</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">R Quantitative Analysis Package
Integrations in tidyquant</h1>
<h4 class="author">Matt Dancho</h4>
<h4 class="date">2023-03-31</h4>


<div id="TOC">
<ul>
<li><a href="#overview" id="toc-overview">Overview</a></li>
<li><a href="#prerequisites" id="toc-prerequisites">Prerequisites</a></li>
<li><a href="#function-compatibility" id="toc-function-compatibility">1.0 Function Compatibility</a>
<ul>
<li><a href="#zoo-functionality" id="toc-zoo-functionality">zoo
Functionality</a></li>
<li><a href="#xts-functionality" id="toc-xts-functionality">xts
Functionality</a></li>
<li><a href="#quantmod-functionality" id="toc-quantmod-functionality">quantmod Functionality</a></li>
<li><a href="#ttr-functionality" id="toc-ttr-functionality">TTR
Functionality</a></li>
<li><a href="#performanceanalytics-functionality" id="toc-performanceanalytics-functionality">PerformanceAnalytics
Functionality</a></li>
</ul></li>
<li><a href="#quantitative-power-in-action" id="toc-quantitative-power-in-action">2.0 Quantitative Power In
Action</a>
<ul>
<li><a href="#example-1-use-quantmod-periodreturn-to-convert-prices-to-returns" id="toc-example-1-use-quantmod-periodreturn-to-convert-prices-to-returns">Example
1: Use quantmod periodReturn to Convert Prices to Returns</a></li>
<li><a href="#example-2-use-xts-to.period-to-change-the-periodicity-from-daily-to-monthly" id="toc-example-2-use-xts-to.period-to-change-the-periodicity-from-daily-to-monthly">Example
2: Use xts to.period to Change the Periodicity from Daily to
Monthly</a></li>
<li><a href="#example-3-use-ttr-runcor-to-visualize-rolling-correlations-of-returns" id="toc-example-3-use-ttr-runcor-to-visualize-rolling-correlations-of-returns">Example
3: Use TTR runCor to Visualize Rolling Correlations of Returns</a></li>
<li><a href="#example-4-use-ttr-macd-to-visualize-moving-average-convergence-divergence" id="toc-example-4-use-ttr-macd-to-visualize-moving-average-convergence-divergence">Example
4: Use TTR MACD to Visualize Moving Average Convergence
Divergence</a></li>
<li><a href="#example-5-use-xts-apply.quarterly-to-get-the-max-and-min-price-for-each-quarter" id="toc-example-5-use-xts-apply.quarterly-to-get-the-max-and-min-price-for-each-quarter">Example
5: Use xts apply.quarterly to Get the Max and Min Price for Each
Quarter</a></li>
<li><a href="#example-6-use-zoo-rollapply-to-visualize-a-rolling-regression" id="toc-example-6-use-zoo-rollapply-to-visualize-a-rolling-regression">Example
6: Use zoo rollapply to visualize a rolling regression</a></li>
<li><a href="#example-7-use-return.clean-and-return.excess-to-clean-and-calculate-excess-returns" id="toc-example-7-use-return.clean-and-return.excess-to-clean-and-calculate-excess-returns">Example
7: Use Return.clean and Return.excess to clean and calculate excess
returns</a></li>
</ul></li>
</ul>
</div>

<blockquote>
<p>Functions that leverage the quantitative analysis functionality of
<code>xts</code>, <code>zoo</code>, <code>quantmod</code>,
<code>TTR</code>, and <code>PerformanceAnalytics</code></p>
</blockquote>
<div id="overview" class="section level1">
<h1>Overview</h1>
<p>There’s a wide range of useful quantitative analysis functions that
work with time-series objects. The problem is that many of these
<em>wonderful</em> functions don’t work with data frames or the
<code>tidyverse</code> workflow. That is until now! The
<code>tidyquant</code> package integrates the most useful functions from
the <code>xts</code>, <code>zoo</code>, <code>quantmod</code>,
<code>TTR</code>, and <code>PerformanceAnalytics</code> packages. This
vignette focuses on the following <em>core functions</em> to demonstrate
how the integratation works with the quantitative finance packages:</p>
<ul>
<li>Transmute, <code>tq_transmute()</code>: Returns a new tidy data
frame typically in a different periodicity than the input.</li>
<li>Mutate, <code>tq_mutate()</code>: Adds columns to the existing tidy
data frame.</li>
</ul>
<p>Refer to <a href="TQ05-performance-analysis-with-tidyquant.html">Performance
Analysis with tidyquant</a> for a full discussion on performance
analysis and portfolio attribution with <code>tidyquant</code>.</p>
</div>
<div id="prerequisites" class="section level1">
<h1>Prerequisites</h1>
<p>Load the <code>tidyquant</code> package to get started.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Loads tidyquant, lubridate, xts, quantmod, TTR </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyquant)</span></code></pre></div>
</div>
<div id="function-compatibility" class="section level1">
<h1>1.0 Function Compatibility</h1>
<p><code>tq_transmute_fun_options()</code> returns a list the
<strong>compatible mutate functions</strong> by each package. We’ll
discuss these options by package briefly.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tq_transmute_fun_options</span>() <span class="sc">%&gt;%</span> <span class="fu">str</span>()</span></code></pre></div>
<pre><code>## List of 5
##  $ zoo                 : chr [1:14] &quot;rollapply&quot; &quot;rollapplyr&quot; &quot;rollmax&quot; &quot;rollmax.default&quot; ...
##  $ xts                 : chr [1:27] &quot;apply.daily&quot; &quot;apply.monthly&quot; &quot;apply.quarterly&quot; &quot;apply.weekly&quot; ...
##  $ quantmod            : chr [1:25] &quot;ClCl&quot; &quot;Delt&quot; &quot;HiCl&quot; &quot;Lag&quot; ...
##  $ TTR                 : chr [1:64] &quot;ADX&quot; &quot;ALMA&quot; &quot;ATR&quot; &quot;BBands&quot; ...
##  $ PerformanceAnalytics: chr [1:7] &quot;Return.Geltner&quot; &quot;Return.annualized&quot; &quot;Return.annualized.excess&quot; &quot;Return.clean&quot; ...</code></pre>
<div id="zoo-functionality" class="section level2">
<h2>zoo Functionality</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get zoo functions that work with tq_transmute and tq_mutate</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tq_transmute_fun_options</span>()<span class="sc">$</span>zoo</span></code></pre></div>
<pre><code>##  [1] &quot;rollapply&quot;          &quot;rollapplyr&quot;         &quot;rollmax&quot;           
##  [4] &quot;rollmax.default&quot;    &quot;rollmaxr&quot;           &quot;rollmean&quot;          
##  [7] &quot;rollmean.default&quot;   &quot;rollmeanr&quot;          &quot;rollmedian&quot;        
## [10] &quot;rollmedian.default&quot; &quot;rollmedianr&quot;        &quot;rollsum&quot;           
## [13] &quot;rollsum.default&quot;    &quot;rollsumr&quot;</code></pre>
<p>The <code>zoo</code> functions that are compatible are listed above.
Generally speaking, these are the:</p>
<ul>
<li>Roll Apply Functions:
<ul>
<li>A generic function for applying a function to rolling margins.</li>
<li>Form:
<code>rollapply(data, width, FUN, ..., by = 1, by.column = TRUE, fill = if (na.pad) NA, na.pad = FALSE, partial = FALSE, align = c(&quot;center&quot;, &quot;left&quot;, &quot;right&quot;), coredata = TRUE)</code>.</li>
<li>Options include <code>rollmax</code>, <code>rollmean</code>,
<code>rollmedian</code>, <code>rollsum</code>, etc.</li>
</ul></li>
</ul>
</div>
<div id="xts-functionality" class="section level2">
<h2>xts Functionality</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get xts functions that work with tq_transmute and tq_mutate</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tq_transmute_fun_options</span>()<span class="sc">$</span>xts</span></code></pre></div>
<pre><code>##  [1] &quot;apply.daily&quot;     &quot;apply.monthly&quot;   &quot;apply.quarterly&quot; &quot;apply.weekly&quot;   
##  [5] &quot;apply.yearly&quot;    &quot;diff.xts&quot;        &quot;lag.xts&quot;         &quot;period.apply&quot;   
##  [9] &quot;period.max&quot;      &quot;period.min&quot;      &quot;period.prod&quot;     &quot;period.sum&quot;     
## [13] &quot;periodicity&quot;     &quot;to.daily&quot;        &quot;to.hourly&quot;       &quot;to.minutes&quot;     
## [17] &quot;to.minutes10&quot;    &quot;to.minutes15&quot;    &quot;to.minutes3&quot;     &quot;to.minutes30&quot;   
## [21] &quot;to.minutes5&quot;     &quot;to.monthly&quot;      &quot;to.period&quot;       &quot;to.quarterly&quot;   
## [25] &quot;to.weekly&quot;       &quot;to.yearly&quot;       &quot;to_period&quot;</code></pre>
<p>The <code>xts</code> functions that are compatible are listed above.
Generally speaking, these are the:</p>
<ul>
<li>Period Apply Functions:
<ul>
<li>Apply a function to a time segment (e.g. <code>max</code>,
<code>min</code>, <code>mean</code>, etc).</li>
<li>Form: <code>apply.daily(x, FUN, ...)</code>.</li>
<li>Options include <code>apply.daily</code>, <code>weekly</code>,
<code>monthly</code>, <code>quarterly</code>, <code>yearly</code>.</li>
</ul></li>
<li>To-Period Functions:
<ul>
<li>Convert a time series to time series of lower periodicity
(e.g. convert daily to monthly periodicity).</li>
<li>Form:
<code>to.period(x, period = &#39;months&#39;, k = 1, indexAt, name = NULL, OHLC = TRUE, ...)</code>.</li>
<li>Options include <code>to.minutes</code>, <code>hourly</code>,
<code>daily</code>, <code>weekly</code>, <code>monthly</code>,
<code>quarterly</code>, <code>yearly</code>.</li>
<li><strong>Note 1 (Important)</strong>: The return structure is
different for <code>to.period</code> and the <code>to.monthly</code>
(<code>to.weekly</code>, <code>to.quarterly</code>, etc) forms.
<code>to.period</code> returns a date, while <code>to.months</code>
returns a character MON YYYY. Best to use <code>to.period</code> if you
want to work with time-series via <code>lubridate</code>.</li>
</ul></li>
</ul>
</div>
<div id="quantmod-functionality" class="section level2">
<h2>quantmod Functionality</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get quantmod functions that work with tq_transmute and tq_mutate</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tq_transmute_fun_options</span>()<span class="sc">$</span>quantmod</span></code></pre></div>
<pre><code>##  [1] &quot;ClCl&quot;            &quot;Delt&quot;            &quot;HiCl&quot;            &quot;Lag&quot;            
##  [5] &quot;LoCl&quot;            &quot;LoHi&quot;            &quot;Next&quot;            &quot;OpCl&quot;           
##  [9] &quot;OpHi&quot;            &quot;OpLo&quot;            &quot;OpOp&quot;            &quot;allReturns&quot;     
## [13] &quot;annualReturn&quot;    &quot;dailyReturn&quot;     &quot;monthlyReturn&quot;   &quot;periodReturn&quot;   
## [17] &quot;quarterlyReturn&quot; &quot;seriesAccel&quot;     &quot;seriesDecel&quot;     &quot;seriesDecr&quot;     
## [21] &quot;seriesHi&quot;        &quot;seriesIncr&quot;      &quot;seriesLo&quot;        &quot;weeklyReturn&quot;   
## [25] &quot;yearlyReturn&quot;</code></pre>
<p>The <code>quantmod</code> functions that are compatible are listed
above. Generally speaking, these are the:</p>
<ul>
<li>Percentage Change (Delt) and Lag Functions
<ul>
<li>Delt:
<code>Delt(x1, x2 = NULL, k = 0, type = c(&quot;arithmetic&quot;, &quot;log&quot;))</code>
<ul>
<li>Variations of Delt: ClCl, HiCl, LoCl, LoHi, OpCl, OpHi, OpLo,
OpOp</li>
<li>Form: <code>OpCl(OHLC)</code></li>
</ul></li>
<li>Lag: <code>Lag(x, k = 1)</code> / Next: <code>Next(x, k = 1)</code>
(Can also use <code>dplyr::lag</code> and <code>dplyr::lead</code>)</li>
</ul></li>
<li>Period Return Functions:
<ul>
<li>Get the arithmetic or logarithmic returns for various periodicity,
which include daily, weekly, monthly, quarterly, and yearly.</li>
<li>Form:
<code>periodReturn(x, period = &#39;monthly&#39;, subset = NULL, type = &#39;arithmetic&#39;, leading = TRUE, ...)</code></li>
</ul></li>
<li>Series Functions:
<ul>
<li>Return values that describe the series. Options include describing
the increases/decreases, acceleration/deceleration, and hi/low.</li>
<li>Forms: <code>seriesHi(x)</code>,
<code>seriesIncr(x, thresh = 0, diff. = 1L)</code>,
<code>seriesAccel(x)</code></li>
</ul></li>
</ul>
</div>
<div id="ttr-functionality" class="section level2">
<h2>TTR Functionality</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get TTR functions that work with tq_transmute and tq_mutate</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tq_transmute_fun_options</span>()<span class="sc">$</span>TTR</span></code></pre></div>
<pre><code>##  [1] &quot;ADX&quot;                &quot;ALMA&quot;               &quot;ATR&quot;               
##  [4] &quot;BBands&quot;             &quot;CCI&quot;                &quot;CLV&quot;               
##  [7] &quot;CMF&quot;                &quot;CMO&quot;                &quot;CTI&quot;               
## [10] &quot;DEMA&quot;               &quot;DPO&quot;                &quot;DVI&quot;               
## [13] &quot;DonchianChannel&quot;    &quot;EMA&quot;                &quot;EMV&quot;               
## [16] &quot;EVWMA&quot;              &quot;GMMA&quot;               &quot;HMA&quot;               
## [19] &quot;KST&quot;                &quot;MACD&quot;               &quot;MFI&quot;               
## [22] &quot;OBV&quot;                &quot;PBands&quot;             &quot;ROC&quot;               
## [25] &quot;RSI&quot;                &quot;SAR&quot;                &quot;SMA&quot;               
## [28] &quot;SMI&quot;                &quot;SNR&quot;                &quot;TDI&quot;               
## [31] &quot;TRIX&quot;               &quot;VHF&quot;                &quot;VMA&quot;               
## [34] &quot;VWAP&quot;               &quot;VWMA&quot;               &quot;WMA&quot;               
## [37] &quot;WPR&quot;                &quot;ZLEMA&quot;              &quot;ZigZag&quot;            
## [40] &quot;adjRatios&quot;          &quot;aroon&quot;              &quot;chaikinAD&quot;         
## [43] &quot;chaikinVolatility&quot;  &quot;growth&quot;             &quot;keltnerChannels&quot;   
## [46] &quot;lags&quot;               &quot;momentum&quot;           &quot;rollSFM&quot;           
## [49] &quot;runCor&quot;             &quot;runCov&quot;             &quot;runMAD&quot;            
## [52] &quot;runMax&quot;             &quot;runMean&quot;            &quot;runMedian&quot;         
## [55] &quot;runMin&quot;             &quot;runPercentRank&quot;     &quot;runSD&quot;             
## [58] &quot;runSum&quot;             &quot;runVar&quot;             &quot;stoch&quot;             
## [61] &quot;ultimateOscillator&quot; &quot;volatility&quot;         &quot;wilderSum&quot;         
## [64] &quot;williamsAD&quot;</code></pre>
<p>Here’ a brief description of the most popular functions from
<code>TTR</code>:</p>
<ul>
<li>Welles Wilder’s Directional Movement Index:
<ul>
<li><code>ADX(HLC, n = 14, maType, ...)</code></li>
</ul></li>
<li>Bollinger Bands:
<ul>
<li><code>BBands(HLC, n = 20, maType, sd = 2, ...)</code>: Bollinger
Bands</li>
</ul></li>
<li>Rate of Change / Momentum:
<ul>
<li><code>ROC(x, n = 1, type = c(&quot;continuous&quot;, &quot;discrete&quot;), na.pad = TRUE)</code>:
Rate of Change</li>
<li><code>momentum(x, n = 1, na.pad = TRUE)</code>: Momentum</li>
</ul></li>
<li>Moving Averages (maType):
<ul>
<li><code>SMA(x, n = 10, ...)</code>: Simple Moving Average</li>
<li><code>EMA(x, n = 10, wilder = FALSE, ratio = NULL, ...)</code>:
Exponential Moving Average</li>
<li><code>DEMA(x, n = 10, v = 1, wilder = FALSE, ratio = NULL)</code>:
Double Exponential Moving Average</li>
<li><code>WMA(x, n = 10, wts = 1:n, ...)</code>: Weighted Moving
Average</li>
<li><code>EVWMA(price, volume, n = 10, ...)</code>: Elastic,
Volume-Weighted Moving Average</li>
<li><code>ZLEMA(x, n = 10, ratio = NULL, ...)</code>: Zero Lag
Exponential Moving Average</li>
<li><code>VWAP(price, volume, n = 10, ...)</code>: Volume-Weighted
Moving Average Price</li>
<li><code>VMA(x, w, ratio = 1, ...)</code>: Variable-Length Moving
Average</li>
<li><code>HMA(x, n = 20, ...)</code>: Hull Moving Average</li>
<li><code>ALMA(x, n = 9, offset = 0.85, sigma = 6, ...)</code>: Arnaud
Legoux Moving Average</li>
</ul></li>
<li>MACD Oscillator:
<ul>
<li><code>MACD(x, nFast = 12, nSlow = 26, nSig = 9, maType, percent = TRUE, ...)</code></li>
</ul></li>
<li>Relative Strength Index:
<ul>
<li><code>RSI(price, n = 14, maType, ...)</code></li>
</ul></li>
<li>runFun:
<ul>
<li><code>runSum(x, n = 10, cumulative = FALSE)</code>: returns sums
over a n-period moving window.</li>
<li><code>runMin(x, n = 10, cumulative = FALSE)</code>: returns minimums
over a n-period moving window.</li>
<li><code>runMax(x, n = 10, cumulative = FALSE)</code>: returns maximums
over a n-period moving window.</li>
<li><code>runMean(x, n = 10, cumulative = FALSE)</code>: returns means
over a n-period moving window.</li>
<li><code>runMedian(x, n = 10, non.unique = &quot;mean&quot;, cumulative = FALSE)</code>:
returns medians over a n-period moving window.</li>
<li><code>runCov(x, y, n = 10, use = &quot;all.obs&quot;, sample = TRUE, cumulative = FALSE)</code>:
returns covariances over a n-period moving window.</li>
<li><code>runCor(x, y, n = 10, use = &quot;all.obs&quot;, sample = TRUE, cumulative = FALSE)</code>:
returns correlations over a n-period moving window.</li>
<li><code>runVar(x, y = NULL, n = 10, sample = TRUE, cumulative = FALSE)</code>:
returns variances over a n-period moving window.</li>
<li><code>runSD(x, n = 10, sample = TRUE, cumulative = FALSE)</code>:
returns standard deviations over a n-period moving window.</li>
<li><code>runMAD(x, n = 10, center = NULL, stat = &quot;median&quot;, constant = 1.4826, non.unique = &quot;mean&quot;, cumulative = FALSE)</code>:
returns median/mean absolute deviations over a n-period moving
window.</li>
<li><code>wilderSum(x, n = 10)</code>: retuns a Welles Wilder style
weighted sum over a n-period moving window.</li>
</ul></li>
<li>Stochastic Oscillator / Stochastic Momentum Index:
<ul>
<li><code>stoch(HLC, nFastK = 14, nFastD = 3, nSlowD = 3, maType, bounded = TRUE, smooth = 1, ...)</code>:
Stochastic Oscillator</li>
<li><code>SMI(HLC, n = 13, nFast = 2, nSlow = 25, nSig = 9, maType, bounded = TRUE, ...)</code>:
Stochastic Momentum Index</li>
</ul></li>
</ul>
</div>
<div id="performanceanalytics-functionality" class="section level2">
<h2>PerformanceAnalytics Functionality</h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get PerformanceAnalytics functions that work with tq_transmute and tq_mutate</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tq_transmute_fun_options</span>()<span class="sc">$</span>PerformanceAnalytics</span></code></pre></div>
<pre><code>## [1] &quot;Return.Geltner&quot;           &quot;Return.annualized&quot;       
## [3] &quot;Return.annualized.excess&quot; &quot;Return.clean&quot;            
## [5] &quot;Return.cumulative&quot;        &quot;Return.excess&quot;           
## [7] &quot;zerofill&quot;</code></pre>
<p>The <code>PerformanceAnalytics</code> mutation functions all deal
with returns:</p>
<ul>
<li><code>Return.annualized</code> and
<code>Return.annualized.excess</code>: Takes period returns and
consolidates into annualized returns</li>
<li><code>Return.clean</code>: Removes outliers from returns</li>
<li><code>Return.excess</code>: Removes the risk-free rate from the
returns to yield returns in excess of the risk-free rate</li>
<li><code>zerofill</code>: Used to replace <code>NA</code> values with
zeros.</li>
</ul>
</div>
</div>
<div id="quantitative-power-in-action" class="section level1">
<h1>2.0 Quantitative Power In Action</h1>
<p>We’ll go through some examples, but first let’s get some data. The
<code>FANG</code> data set will be used which consists of stock prices
for FB, AMZN, NFLX, and GOOG from the beginning of 2013 to the end of
2016.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;FANG&quot;</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>FANG</span></code></pre></div>
<pre><code>## # A tibble: 4,032 x 8
##    symbol date        open  high   low close    volume adjusted
##    &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
##  1 FB     2013-01-02  27.4  28.2  27.4  28    69846400     28  
##  2 FB     2013-01-03  27.9  28.5  27.6  27.8  63140600     27.8
##  3 FB     2013-01-04  28.0  28.9  27.8  28.8  72715400     28.8
##  4 FB     2013-01-07  28.7  29.8  28.6  29.4  83781800     29.4
##  5 FB     2013-01-08  29.5  29.6  28.9  29.1  45871300     29.1
##  6 FB     2013-01-09  29.7  30.6  29.5  30.6 104787700     30.6
##  7 FB     2013-01-10  30.6  31.5  30.3  31.3  95316400     31.3
##  8 FB     2013-01-11  31.3  32.0  31.1  31.7  89598000     31.7
##  9 FB     2013-01-14  32.1  32.2  30.6  31.0  98892800     31.0
## 10 FB     2013-01-15  30.6  31.7  29.9  30.1 173242600     30.1
## # ... with 4,022 more rows</code></pre>
<div id="example-1-use-quantmod-periodreturn-to-convert-prices-to-returns" class="section level2">
<h2>Example 1: Use quantmod periodReturn to Convert Prices to
Returns</h2>
<p>The <code>quantmod::periodReturn()</code> function generates returns
by periodicity. We’ll go through a couple usage cases.</p>
<div id="example-1a-getting-and-charting-annual-returns" class="section level3">
<h3>Example 1A: Getting and Charting Annual Returns</h3>
<p>We want to use the adjusted closing prices column (adjusted for stock
splits, which can make it appear that a stock is performing poorly if a
split is included). We set <code>select = adjusted</code>. We research
the <code>periodReturn</code> function, and we found that it accepts
<code>type = &quot;arithmetic&quot;</code> and <code>period = &quot;yearly&quot;</code>,
which returns the annual returns.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>FANG_annual_returns <span class="ot">&lt;-</span> FANG <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(symbol) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute</span>(<span class="at">select     =</span> adjusted, </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">mutate_fun =</span> periodReturn, </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">period     =</span> <span class="st">&quot;yearly&quot;</span>, </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type       =</span> <span class="st">&quot;arithmetic&quot;</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>FANG_annual_returns</span></code></pre></div>
<pre><code>## # A tibble: 16 x 3
## # Groups:   symbol [4]
##    symbol date       yearly.returns
##    &lt;chr&gt;  &lt;date&gt;              &lt;dbl&gt;
##  1 FB     2013-12-31         0.952 
##  2 FB     2014-12-31         0.428 
##  3 FB     2015-12-31         0.341 
##  4 FB     2016-12-30         0.0993
##  5 AMZN   2013-12-31         0.550 
##  6 AMZN   2014-12-31        -0.222 
##  7 AMZN   2015-12-31         1.18  
##  8 AMZN   2016-12-30         0.109 
##  9 NFLX   2013-12-31         3.00  
## 10 NFLX   2014-12-31        -0.0721
## 11 NFLX   2015-12-31         1.34  
## 12 NFLX   2016-12-30         0.0824
## 13 GOOG   2013-12-31         0.550 
## 14 GOOG   2014-12-31        -0.0597
## 15 GOOG   2015-12-31         0.442 
## 16 GOOG   2016-12-30         0.0171</code></pre>
<p>Charting annual returns is just a quick use of the
<code>ggplot2</code> package.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>FANG_annual_returns <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> yearly.returns, <span class="at">fill =</span> symbol)) <span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="fu">palette_light</span>()[[<span class="dv">1</span>]]) <span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;FANG: Annual Returns&quot;</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;Get annual returns quickly with tq_transmute!&quot;</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Annual Returns&quot;</span>, <span class="at">x =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span> </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> symbol, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_tq</span>() <span class="sc">+</span> </span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_tq</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="95%" style="display: block; margin: auto;" /></p>
</div>
<div id="example-1b-getting-daily-log-returns" class="section level3">
<h3>Example 1B: Getting Daily Log Returns</h3>
<p>Daily log returns follows a similar approach. Normally I go with a
transmute function, <code>tq_transmute</code>, because the
<code>periodReturn</code> function accepts different periodicity
options, and anything other than daily will blow up a mutation. But, in
our situation the period returns periodicity is the same as the stock
prices periodicity (both daily), so we can use either. We want to use
the adjusted closing prices column (adjusted for stock splits, which can
make it appear that a stock is performing poorly if a split is
included), so we set <code>select = adjusted</code>. We researched the
<code>periodReturn</code> function, and we found that it accepts
<code>type = &quot;log&quot;</code> and <code>period = &quot;daily&quot;</code>, which
returns the daily log returns.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>FANG_daily_log_returns <span class="ot">&lt;-</span> FANG <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(symbol) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute</span>(<span class="at">select     =</span> adjusted, </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">mutate_fun =</span> periodReturn, </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">period     =</span> <span class="st">&quot;daily&quot;</span>, </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type       =</span> <span class="st">&quot;log&quot;</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col_rename =</span> <span class="st">&quot;monthly.returns&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>FANG_daily_log_returns <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> monthly.returns, <span class="at">fill =</span> symbol)) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;FANG: Charting the Daily Log Returns&quot;</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Monthly Returns&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Density&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_tq</span>() <span class="sc">+</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_tq</span>() <span class="sc">+</span> </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> symbol, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="95%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="example-2-use-xts-to.period-to-change-the-periodicity-from-daily-to-monthly" class="section level2">
<h2>Example 2: Use xts to.period to Change the Periodicity from Daily to
Monthly</h2>
<p>The <code>xts::to.period</code> function is used for periodicity
aggregation (converting from a lower level periodicity to a higher level
such as minutes to hours or months to years). Because we are seeking a
return structure that is on a different time scale than the input (daily
versus weekly), we need to use a transmute function. We select
<code>tq_transmute()</code> and pass the open, high, low, close and
volume columns via <code>select = open:volume</code>. Looking at the
documentation for <code>to.period</code>, we see that it accepts a
<code>period</code> argument that we can set to <code>&quot;weeks&quot;</code>.
The result is the OHLCV data returned with the dates changed to one day
per week.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>FANG <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(symbol) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute</span>(<span class="at">select     =</span> open<span class="sc">:</span>volume, </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">mutate_fun =</span> to.period, </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">period     =</span> <span class="st">&quot;months&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 192 x 7
## # Groups:   symbol [4]
##    symbol date        open  high   low close    volume
##    &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;
##  1 FB     2013-01-31  29.2  31.5  28.7  31.0 190744900
##  2 FB     2013-02-28  26.8  27.3  26.3  27.2  83027800
##  3 FB     2013-03-28  26.1  26.2  25.5  25.6  28585700
##  4 FB     2013-04-30  27.1  27.8  27.0  27.8  36245700
##  5 FB     2013-05-31  24.6  25.0  24.3  24.4  35925000
##  6 FB     2013-06-28  24.7  25.0  24.4  24.9  96778900
##  7 FB     2013-07-31  38.0  38.3  36.3  36.8 154828700
##  8 FB     2013-08-30  42.0  42.3  41.1  41.3  67735100
##  9 FB     2013-09-30  50.1  51.6  49.8  50.2 100095000
## 10 FB     2013-10-31  47.2  52    46.5  50.2 248809000
## # ... with 182 more rows</code></pre>
<p>A common usage case is to reduce the number of points to smooth time
series plots. Let’s check out difference between daily and monthly
plots.</p>
<div id="without-periodicity-aggregation" class="section level3">
<h3>Without Periodicity Aggregation</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>FANG_daily <span class="ot">&lt;-</span> FANG <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(symbol)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>FANG_daily <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> adjusted, <span class="at">color =</span> symbol)) <span class="sc">+</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Daily Stock Prices&quot;</span>,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Adjusted Prices&quot;</span>, <span class="at">color =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> symbol, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_tq</span>() <span class="sc">+</span> </span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_tq</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="95%" style="display: block; margin: auto;" /></p>
</div>
<div id="with-monthly-periodicity-aggregation" class="section level3">
<h3>With Monthly Periodicity Aggregation</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>FANG_monthly <span class="ot">&lt;-</span> FANG <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(symbol) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute</span>(<span class="at">select     =</span> adjusted, </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">mutate_fun =</span> to.period, </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">period     =</span> <span class="st">&quot;months&quot;</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>FANG_monthly <span class="sc">%&gt;%</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> adjusted, <span class="at">color =</span> symbol)) <span class="sc">+</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Monthly Stock Prices&quot;</span>,</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Adjusted Prices&quot;</span>, <span class="at">color =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> symbol, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_tq</span>() <span class="sc">+</span> </span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_tq</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="95%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="example-3-use-ttr-runcor-to-visualize-rolling-correlations-of-returns" class="section level2">
<h2>Example 3: Use TTR runCor to Visualize Rolling Correlations of
Returns</h2>
<p>Return correlations are a common way to analyze how closely an asset
or portfolio mimics a baseline index or fund. We will need a set of
returns for both the stocks and baseline. The stock will be the
<code>FANG</code> data set and the baseline will be the Spdr XLK
technology sector. We have the prices for the “FANG” stocks, so we use
<code>tq_get</code> to retrieve the “XLK” prices. The returns can be
calculated from the “adjusted” prices using the process in Example
1.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Asset Returns</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>FANG_returns_monthly <span class="ot">&lt;-</span> FANG <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(symbol) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute</span>(<span class="at">select     =</span> adjusted, </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">mutate_fun =</span> periodReturn,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">period     =</span> <span class="st">&quot;monthly&quot;</span>)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Baseline Returns</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>baseline_returns_monthly <span class="ot">&lt;-</span> <span class="st">&quot;XLK&quot;</span> <span class="sc">%&gt;%</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_get</span>(<span class="at">get  =</span> <span class="st">&quot;stock.prices&quot;</span>,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">from =</span> <span class="st">&quot;2013-01-01&quot;</span>, </span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">to   =</span> <span class="st">&quot;2016-12-31&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute</span>(<span class="at">select     =</span> adjusted, </span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>                 <span class="at">mutate_fun =</span> periodReturn,</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>                 <span class="at">period     =</span> <span class="st">&quot;monthly&quot;</span>)</span></code></pre></div>
<p>Next, join the asset returns with the baseline returns by date.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>returns_joined <span class="ot">&lt;-</span> <span class="fu">left_join</span>(FANG_returns_monthly, </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>                            baseline_returns_monthly,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">by =</span> <span class="st">&quot;date&quot;</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>returns_joined</span></code></pre></div>
<pre><code>## # A tibble: 192 x 4
## # Groups:   symbol [4]
##    symbol date       monthly.returns.x monthly.returns.y
##    &lt;chr&gt;  &lt;date&gt;                 &lt;dbl&gt;             &lt;dbl&gt;
##  1 FB     2013-01-31          0.106             -0.0138 
##  2 FB     2013-02-28         -0.120              0.00782
##  3 FB     2013-03-28         -0.0613             0.0258 
##  4 FB     2013-04-30          0.0856             0.0175 
##  5 FB     2013-05-31         -0.123              0.0279 
##  6 FB     2013-06-28          0.0218            -0.0289 
##  7 FB     2013-07-31          0.479              0.0373 
##  8 FB     2013-08-30          0.122             -0.0104 
##  9 FB     2013-09-30          0.217              0.0253 
## 10 FB     2013-10-31         -0.000398           0.0502 
## # ... with 182 more rows</code></pre>
<p>The <code>TTR::runCor</code> function can be used to evaluate rolling
correlations using the xy pattern. Looking at the documentation
(<code>?runCor</code>), we can see that the arguments include
<code>x</code> and <code>y</code> along with a few additional arguments
including <code>n</code> for the width of the rolling correlation.
Because the scale is monthly, we’ll go with <code>n = 6</code> for a
6-month rolling correlation. The <code>col_rename</code> argument
enables easy renaming of the output column(s).</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>FANG_rolling_corr <span class="ot">&lt;-</span> returns_joined <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute_xy</span>(<span class="at">x          =</span> monthly.returns.x, </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y          =</span> monthly.returns.y,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">mutate_fun =</span> runCor,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">n          =</span> <span class="dv">6</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">col_rename =</span> <span class="st">&quot;rolling.corr.6&quot;</span>)</span></code></pre></div>
<p>And, we can plot the rolling correlations for the FANG stocks.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>FANG_rolling_corr <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> rolling.corr<span class="fl">.6</span>, <span class="at">color =</span> symbol)) <span class="sc">+</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="fu">palette_light</span>()[[<span class="dv">1</span>]]) <span class="sc">+</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;FANG: Six Month Rolling Correlation to XLK&quot;</span>,</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Correlation&quot;</span>, <span class="at">color =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> symbol, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_tq</span>() <span class="sc">+</span> </span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_tq</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="95%" style="display: block; margin: auto;" /></p>
</div>
<div id="example-4-use-ttr-macd-to-visualize-moving-average-convergence-divergence" class="section level2">
<h2>Example 4: Use TTR MACD to Visualize Moving Average Convergence
Divergence</h2>
<p>In reviewing the available options in the <code>TTR</code> package,
we see that <code>MACD</code> will get us the Moving Average Convergence
Divergence (MACD). In researching the documentation, the return is in
the same periodicity as the input and the functions work with OHLC
functions, so we can use <code>tq_mutate()</code>. MACD requires a
price, so we select <code>close</code>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>FANG_macd <span class="ot">&lt;-</span> FANG <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(symbol) <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_mutate</span>(<span class="at">select     =</span> close, </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">mutate_fun =</span> MACD, </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">nFast      =</span> <span class="dv">12</span>, </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">nSlow      =</span> <span class="dv">26</span>, </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">nSig       =</span> <span class="dv">9</span>, </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">maType     =</span> SMA) <span class="sc">%&gt;%</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">diff =</span> macd <span class="sc">-</span> signal) <span class="sc">%&gt;%</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>(open<span class="sc">:</span>volume))</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>FANG_macd</span></code></pre></div>
<pre><code>## # A tibble: 4,032 x 6
## # Groups:   symbol [4]
##    symbol date       adjusted  macd signal  diff
##    &lt;chr&gt;  &lt;date&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
##  1 FB     2013-01-02     28      NA     NA    NA
##  2 FB     2013-01-03     27.8    NA     NA    NA
##  3 FB     2013-01-04     28.8    NA     NA    NA
##  4 FB     2013-01-07     29.4    NA     NA    NA
##  5 FB     2013-01-08     29.1    NA     NA    NA
##  6 FB     2013-01-09     30.6    NA     NA    NA
##  7 FB     2013-01-10     31.3    NA     NA    NA
##  8 FB     2013-01-11     31.7    NA     NA    NA
##  9 FB     2013-01-14     31.0    NA     NA    NA
## 10 FB     2013-01-15     30.1    NA     NA    NA
## # ... with 4,022 more rows</code></pre>
<p>And, we can visualize the data like so.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>FANG_macd <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="fu">as_date</span>(<span class="st">&quot;2016-10-01&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date)) <span class="sc">+</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="fu">palette_light</span>()[[<span class="dv">1</span>]]) <span class="sc">+</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> macd, <span class="at">col =</span> symbol)) <span class="sc">+</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> signal), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y =</span> diff), <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color =</span> <span class="fu">palette_light</span>()[[<span class="dv">1</span>]]) <span class="sc">+</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> symbol, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scale =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;FANG: Moving Average Convergence Divergence&quot;</span>,</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;MACD&quot;</span>, <span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">color =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_tq</span>() <span class="sc">+</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_tq</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="95%" style="display: block; margin: auto;" /></p>
</div>
<div id="example-5-use-xts-apply.quarterly-to-get-the-max-and-min-price-for-each-quarter" class="section level2">
<h2>Example 5: Use xts apply.quarterly to Get the Max and Min Price for
Each Quarter</h2>
<p>The <code>xts::apply.quarterly()</code> function that is part of the
period apply group can be used to apply functions by quarterly time
segments. Because we are seeking a return structure that is on a
different time scale than the input (quarterly versus daily), we need to
use a transmute function. We select <code>tq_transmute</code> and pass
the close price using <code>select</code>, and we send this subset of
the data to the <code>apply.quarterly</code> function via the
<code>mutate_fun</code> argument. Looking at the documentation for
<code>apply.quarterly</code>, we see that we can pass a function to the
argument, <code>FUN</code>. We want the maximum values, so we set
<code>FUN = max</code>. The result is the quarters returned as a date
and the maximum closing price during the quarter returned as a
double.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>FANG_max_by_qtr <span class="ot">&lt;-</span> FANG <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(symbol) <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute</span>(<span class="at">select     =</span> adjusted, </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">mutate_fun =</span> apply.quarterly, </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">FUN        =</span> max, </span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col_rename =</span> <span class="st">&quot;max.close&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">year.qtr =</span> <span class="fu">paste0</span>(<span class="fu">year</span>(date), <span class="st">&quot;-Q&quot;</span>, <span class="fu">quarter</span>(date))) <span class="sc">%&gt;%</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>date)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>FANG_max_by_qtr</span></code></pre></div>
<pre><code>## # A tibble: 64 x 3
## # Groups:   symbol [4]
##    symbol max.close year.qtr
##    &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;   
##  1 FB          32.5 2013-Q1 
##  2 FB          29.0 2013-Q2 
##  3 FB          51.2 2013-Q3 
##  4 FB          58.0 2013-Q4 
##  5 FB          72.0 2014-Q1 
##  6 FB          67.6 2014-Q2 
##  7 FB          79.0 2014-Q3 
##  8 FB          81.4 2014-Q4 
##  9 FB          85.3 2015-Q1 
## 10 FB          88.9 2015-Q2 
## # ... with 54 more rows</code></pre>
<p>The minimum each quarter can be retrieved in much the same way. The
data frames can be joined using <code>left_join</code> to get the max
and min by quarter.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>FANG_min_by_qtr <span class="ot">&lt;-</span> FANG <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(symbol) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute</span>(<span class="at">select     =</span> adjusted, </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">mutate_fun =</span> apply.quarterly, </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">FUN        =</span> min, </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col_rename =</span> <span class="st">&quot;min.close&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">year.qtr =</span> <span class="fu">paste0</span>(<span class="fu">year</span>(date), <span class="st">&quot;-Q&quot;</span>, <span class="fu">quarter</span>(date))) <span class="sc">%&gt;%</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>date)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>FANG_by_qtr <span class="ot">&lt;-</span> <span class="fu">left_join</span>(FANG_max_by_qtr, FANG_min_by_qtr,</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;symbol&quot;</span>   <span class="ot">=</span> <span class="st">&quot;symbol&quot;</span>,</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>                                <span class="st">&quot;year.qtr&quot;</span> <span class="ot">=</span> <span class="st">&quot;year.qtr&quot;</span>))</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>FANG_by_qtr</span></code></pre></div>
<pre><code>## # A tibble: 64 x 4
## # Groups:   symbol [4]
##    symbol max.close year.qtr min.close
##    &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;
##  1 FB          32.5 2013-Q1       25.1
##  2 FB          29.0 2013-Q2       22.9
##  3 FB          51.2 2013-Q3       24.4
##  4 FB          58.0 2013-Q4       44.8
##  5 FB          72.0 2014-Q1       53.5
##  6 FB          67.6 2014-Q2       56.1
##  7 FB          79.0 2014-Q3       62.8
##  8 FB          81.4 2014-Q4       72.6
##  9 FB          85.3 2015-Q1       74.1
## 10 FB          88.9 2015-Q2       77.5
## # ... with 54 more rows</code></pre>
<p>And, we can visualize the data like so.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>FANG_by_qtr <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year.qtr, <span class="at">color =</span> symbol)) <span class="sc">+</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">xend =</span> year.qtr, <span class="at">y =</span> min.close, <span class="at">yend =</span> max.close),</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> max.close), <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> min.close), <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> symbol, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scale =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;FANG: Min/Max Price By Quarter&quot;</span>,</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Stock Price&quot;</span>, <span class="at">color =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_tq</span>() <span class="sc">+</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_tq</span>() <span class="sc">+</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="95%" style="display: block; margin: auto;" /></p>
</div>
<div id="example-6-use-zoo-rollapply-to-visualize-a-rolling-regression" class="section level2">
<h2>Example 6: Use zoo rollapply to visualize a rolling regression</h2>
<p>A good way to analyze relationships over time is using rolling
calculations that compare two assets. Pairs trading is a common
mechanism for similar assets. While we will not go into a pairs trade
analysis, we will analyze the relationship between two similar assets as
a precursor to a pairs trade. In this example we will analyze two
similar assets, Mastercard (MA) and Visa (V) to show the relationship
via regression.</p>
<p>Before we analyze a rolling regression, it’s helpful to view the
overall trend in returns. To do this, we use <code>tq_get()</code> to
get stock prices for the assets and <code>tq_transmute()</code> to
transform the daily prices to daily returns. We’ll collect the data and
visualize via a scatter plot.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get stock pairs</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>stock_prices <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;MA&quot;</span>, <span class="st">&quot;V&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_get</span>(<span class="at">get  =</span> <span class="st">&quot;stock.prices&quot;</span>,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">from =</span> <span class="st">&quot;2015-01-01&quot;</span>,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">to   =</span> <span class="st">&quot;2016-12-31&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(symbol) </span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>stock_pairs <span class="ot">&lt;-</span> stock_prices <span class="sc">%&gt;%</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute</span>(<span class="at">select     =</span> adjusted,</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">mutate_fun =</span> periodReturn,</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">period     =</span> <span class="st">&quot;daily&quot;</span>,</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type       =</span> <span class="st">&quot;log&quot;</span>,</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col_rename =</span> <span class="st">&quot;returns&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">spread</span>(<span class="at">key =</span> symbol, <span class="at">value =</span> returns)</span></code></pre></div>
<p>We can visualize the relationship between the returns of the stock
pairs like so.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>stock_pairs <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> V, <span class="at">y =</span> MA)) <span class="sc">+</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="fu">palette_light</span>()[[<span class="dv">1</span>]], <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Visualizing Returns Relationship of Stock Pairs&quot;</span>) <span class="sc">+</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_tq</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="95%" style="display: block; margin: auto;" /></p>
<p>We can get statistcs on the relationship from the <code>lm</code>
function. The model is highly correlated with a p-value of essential
zero. The coefficient estimate for V (Coefficient 1) is 0.8134
indicating a positive relationship, meaning as V increases MA also tends
to increase.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(MA <span class="sc">~</span> V, <span class="at">data =</span> stock_pairs) <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = MA ~ V, data = stock_pairs)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.026957 -0.003966  0.000215  0.003965  0.028946 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 0.0001130  0.0003097   0.365    0.715    
## V           0.8133666  0.0226393  35.927   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.00695 on 502 degrees of freedom
## Multiple R-squared:   0.72,  Adjusted R-squared:  0.7194 
## F-statistic:  1291 on 1 and 502 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>While this characterizes the overall relationship, it’s missing the
time aspect. Fortunately, we can use the <code>rollapply</code> function
from the <code>zoo</code> package to plot a rolling regression, showing
how the model coefficent varies on a rolling basis over time. We
calculate rolling regressions with <code>tq_mutate()</code> in two
additional steps:</p>
<ol style="list-style-type: decimal">
<li>Create a custom function</li>
<li>Apply the function with
<code>tq_mutate(mutate_fun = rollapply)</code></li>
</ol>
<p>First, create a custom regression function. An important point is
that the “data” will be passed to the regression function as an
<code>xts</code> object. The <code>timetk::tk_tbl</code> function takes
care of converting to a data frame.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>regr_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coef</span>(<span class="fu">lm</span>(MA <span class="sc">~</span> V, <span class="at">data =</span> timetk<span class="sc">::</span><span class="fu">tk_tbl</span>(data, <span class="at">silent =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now we can use <code>tq_mutate()</code> to apply the custom
regression function over a rolling window using <code>rollapply</code>
from the <code>zoo</code> package. Internally, the
<code>returns_combined</code> data frame is being passed automatically
to the <code>data</code> argument of the <code>rollapply</code>
function. All you need to specify is the
<code>mutate_fun = rollapply</code> and any additional arguments
necessary to apply the <code>rollapply</code> function. We’ll specify a
90 day window via <code>width = 90</code>. The <code>FUN</code> argument
is our custom regression function, <code>regr_fun</code>. It’s extremely
important to specify <code>by.column = FALSE</code>, which tells
<code>rollapply</code> to perform the computation using the data as a
whole rather than apply the function to each column independently. The
<code>col_rename</code> argument is used to rename the added
columns.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>stock_pairs <span class="ot">&lt;-</span> stock_pairs <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">tq_mutate</span>(<span class="at">mutate_fun =</span> rollapply,</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">width      =</span> <span class="dv">90</span>,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">FUN        =</span> regr_fun,</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">by.column  =</span> <span class="cn">FALSE</span>,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">col_rename =</span> <span class="fu">c</span>(<span class="st">&quot;coef.0&quot;</span>, <span class="st">&quot;coef.1&quot;</span>))</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>stock_pairs</span></code></pre></div>
<pre><code>## # A tibble: 504 x 5
##    date             MA        V coef.0 coef.1
##    &lt;date&gt;        &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1 2015-01-02  0        0           NA     NA
##  2 2015-01-05 -0.0285  -0.0223      NA     NA
##  3 2015-01-06 -0.00216 -0.00646     NA     NA
##  4 2015-01-07  0.0154   0.0133      NA     NA
##  5 2015-01-08  0.0154   0.0133      NA     NA
##  6 2015-01-09 -0.0128  -0.0149      NA     NA
##  7 2015-01-12 -0.0129  -0.00196     NA     NA
##  8 2015-01-13  0.00228  0.00292     NA     NA
##  9 2015-01-14 -0.00108 -0.0202      NA     NA
## 10 2015-01-15 -0.0146  -0.00955     NA     NA
## # ... with 494 more rows</code></pre>
<p>Finally, we can visualize the first coefficient like so. A horizontal
line is added using the full data set model. This gives us insight as to
points in time where the relationship deviates significantly from the
long run trend which can be explored for potential pair trade
opportunities.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>stock_pairs <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> coef<span class="fl">.1</span>)) <span class="sc">+</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="fu">palette_light</span>()[[<span class="dv">1</span>]]) <span class="sc">+</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fl">0.8134</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="fu">palette_light</span>()[[<span class="dv">2</span>]]) <span class="sc">+</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;MA ~ V: Visualizing Rolling Regression Coefficient&quot;</span>, <span class="at">x =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_tq</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="95%" style="display: block; margin: auto;" /></p>
<p>Stock returns during this time period.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>stock_prices <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute</span>(adjusted, </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>                 periodReturn, </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">period =</span> <span class="st">&quot;daily&quot;</span>, </span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type =</span> <span class="st">&quot;log&quot;</span>, </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col_rename =</span> <span class="st">&quot;returns&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">wealth.index =</span> <span class="dv">100</span> <span class="sc">*</span> <span class="fu">cumprod</span>(<span class="dv">1</span> <span class="sc">+</span> returns)) <span class="sc">%&gt;%</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> wealth.index, <span class="at">color =</span> symbol)) <span class="sc">+</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;MA and V: Stock Prices&quot;</span>) <span class="sc">+</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_tq</span>() <span class="sc">+</span> </span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_tq</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="95%" style="display: block; margin: auto;" /></p>
</div>
<div id="example-7-use-return.clean-and-return.excess-to-clean-and-calculate-excess-returns" class="section level2">
<h2>Example 7: Use Return.clean and Return.excess to clean and calculate
excess returns</h2>
<p>In this example we use several of the
<code>PerformanceAnalytics</code> functions to clean and format returns.
The example uses three progressive applications of
<code>tq_transmute</code> to apply various quant functions to the
grouped stock prices from the <code>FANG</code> data set. First, we
calculate daily returns using <code>quantmod::periodReturn</code>. Next,
we use <code>Return.clean</code> to clean outliers from the return data.
The <code>alpha</code> parameter is the percentage of oultiers to be
cleaned. Finally, the excess returns are calculated using a risk-free
rate of 3% (divided by 252 for 252 trade days in one year).</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>FANG <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(symbol) <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute</span>(adjusted, periodReturn, <span class="at">period =</span> <span class="st">&quot;daily&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute</span>(daily.returns, Return.clean, <span class="at">alpha =</span> <span class="fl">0.05</span>) <span class="sc">%&gt;%</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tq_transmute</span>(daily.returns, Return.excess, <span class="at">Rf =</span> <span class="fl">0.03</span> <span class="sc">/</span> <span class="dv">252</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4,032 x 3
## # Groups:   symbol [4]
##    symbol date       `daily.returns &gt; Rf`
##    &lt;chr&gt;  &lt;date&gt;                    &lt;dbl&gt;
##  1 FB     2013-01-02            -0.000119
##  2 FB     2013-01-03            -0.00833 
##  3 FB     2013-01-04             0.0355  
##  4 FB     2013-01-07             0.0228  
##  5 FB     2013-01-08            -0.0124  
##  6 FB     2013-01-09             0.0525  
##  7 FB     2013-01-10             0.0231  
##  8 FB     2013-01-11             0.0133  
##  9 FB     2013-01-14            -0.0244  
## 10 FB     2013-01-15            -0.0276  
## # ... with 4,022 more rows</code></pre>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
